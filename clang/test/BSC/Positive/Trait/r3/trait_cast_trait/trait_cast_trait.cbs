// RUN: %clang %s -o %t.output
// RUN: %t.output
// RUN: %clang -rewrite-bsc %s -o %t-rw.c
// RUN: %clang %t-rw.c -o %t-rw.output
// RUN: %t-rw.output
// expected-no-diagnostics

trait F {
  int foo(This *this);
};

struct S {};

int struct S::foo(This *this) {
  return 1;
}

impl trait F for struct S;

int main() {
  struct S s;
  trait F *p = &s;
  trait F *p1 = (trait F *)&s;
  trait F *q = p;
  trait F *q1 = (trait F *)p;
  q = p;
  q1 = (trait F *)p;
}