// RUN: %clang %s -o %t.output
// RUN: %t.output
// RUN: %clang -rewrite-bsc %s -o %t-rw.c
// RUN: %clang %t-rw.c -o %t-rw.output
// RUN: %t-rw.output
// expected-no-diagnostics

struct MyStruct<T1, T2> {
  T1 res1;
  T2 res2;
};

struct MyStruct<int, float> foo(struct MyStruct<int, float> *this) {
  return *this;
}

int main() {
  struct MyStruct<int, float> p = {.res1 = 1, .res2 = 1.0};
  foo(&p);
  return p.res1 - 1;  
}