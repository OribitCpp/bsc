// RUN: %clang %s -o %t.output
// RUN: %t.output
// RUN: %clang -rewrite-bsc %s -o %t-rw.c
// RUN: %clang %t-rw.c -o %t-rw.output
// RUN: %t-rw.output
// expected-no-diagnostics

#include<stdio.h>

struct Shape {
  int width;
  int hight;
};

struct S<T> {
  T elem;
};


int main ()
{
  struct Shape shape = {.width = 42, .hight = 42};
  printf("%d, %d\n", shape.width, shape.hight);

  struct S<int> aaa = {.elem = 42};
  printf("%d\n", aaa.elem);

  struct S<struct Shape> bbb = {.elem = shape};
  printf("%d, %d\n", bbb.elem.width, bbb.elem.hight);

  // struct S<struct S<struct Shape>> ccc = {.elem = bbb};

  return 0;
}
