// RUN: %clang %s -o %t.output
// RUN: %t.output
// RUN: %clang -rewrite-bsc %s -o %t-rw.c
// RUN: %clang %t-rw.c -o %t-rw.output
// RUN: %t-rw.output
// expected-no-diagnostics

#include <stdio.h>

struct A{
  int x;
  float y;
};

struct B{
  int x;
  float y;
};

void foo<T1, T2> (T1 a, T2 b) {
  int x1 = a.x + b.x;
  printf("x1 = %d\n", x1);
  float x2 = a.y + b.y;
  printf("x2 = %f\n", x2);
}

void foo2<T1, T2> (T1 a, T2 b) {
  int x3 = a + b;
  printf("x3 = %f\n", x3);
}

int main(){
  struct A a = {.x = 2022, .y = 1.5};
  struct B b = {.x = 2023, .y = 1.6};
  foo<struct A, struct B>(a, b);
  foo2<int, int>(1, 2);
  return 0;
}

