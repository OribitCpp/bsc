// RUN: %clang %s -o %t.output
// RUN: %t.output
// RUN: %clang -rewrite-bsc %s -o %t-rw.c
// RUN: %clang %t-rw.c -o %t-rw.output
// RUN: %t-rw.output
// expected-no-diagnostics


struct A<T1, T2> {};
struct B<T> {};

struct A<T1, T2> foo<T1, T2>(struct A<T1, T2> *this) {
  return *this;
}

int main() {
  struct A<struct B<int>, int> a;
  foo<struct B<int>, int>(&a);
  return 0;
}