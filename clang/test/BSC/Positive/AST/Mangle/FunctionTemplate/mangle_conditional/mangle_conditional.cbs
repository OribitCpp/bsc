// RUN: %clang -S -emit-llvm -o - %s | FileCheck %s
// RUN: %clang %s -g -o %test.output
// RUN: %test.output
// expected-no-diagnostics

#include "bsc_conditional.hbs"

// CHECK: define {{.*}} @foo_1_intLB3RB_int
void foo<int N, T1, T2>(conditional<N, T1, T2> a) {
    conditional<N, T1, T2> b;
    for (int i = 0; i < sizeof(a) / sizeof(a[0]); i++) {
        b[i] = a[i];
    }
}

int main() {
    constexpr int a = 1;
    int b[3] = {1, 2, 3}; 
    foo<a, int[3], int>(b);
    return 0;
}
