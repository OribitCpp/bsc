// RUN: %clang_cc1 -verify %s
// RUN: %clang -rewrite-bsc %s -o %t-rw.c
// RUN: FileCheck --input-file=%t-rw.c %s
// RUN: %clang_cc1 %t-rw.c -o %t-rw.output
// expected-no-diagnostics

typedef struct _queue {
}queue;

queue* queue::reverse(queue* this) {
    this->reverse();
    return this;
}

int main() {
    queue obj;
    obj.reverse();
    return 0;
}

// CHECK:      typedef struct _queue queue;
// CHECK-EMPTY:
// CHECK-NEXT: struct _queue {
// CHECK-NEXT: };
// CHECK-EMPTY:
// CHECK-NEXT: queue *queue_reverse(queue *this) {
// CHECK-NEXT:     queue_reverse(this);
// CHECK-NEXT:     return this;
// CHECK-NEXT: }