// RUN: %clang -rewrite-bsc %s -o %t-rw.c
// RUN: FileCheck --input-file=%t-rw.c %s
// RUN: %clang %t-rw.c -o %t-rw.output
// RUN: %t-rw.output


// ISSUE I8MS2X

#define EXPECT 55
static int Func_1<T>(int a1)
{
    int sum;
    int n1 = 1;
    int n2 = 1;
    int tmp = 0;
    int i;
    if (a1 < 3) {
        return 1;
    } else {
        for (i = 0; i <= a1 - 3; ++i) {
            tmp = n1 + n2;
            n1 = n2;
            n2 = tmp;
        }
    }
    return tmp;
}

int main()
{
    int a1 = 10;
    int res = Func_1<int>(a1);

    if (res != EXPECT) {
        return 1;
    }

    return 0;
}

// CHECK:      #define EXPECT 55
// CHECK-EMPTY:
// CHECK-NEXT: static int Func_1_int(int a1);
// CHECK-EMPTY:
// CHECK-NEXT: int main(void) {
// CHECK-NEXT:   int a1 = 10;
// CHECK-NEXT:   int res = Func_1_int(a1);
// CHECK-NEXT:   if (res != 55) {
// CHECK-NEXT:     return 1;
// CHECK-NEXT:   }
// CHECK-NEXT:   return 0;
// CHECK-NEXT: }
// CHECK-EMPTY:
// CHECK-NEXT: static int Func_1_int(int a1) {
// CHECK-NEXT:   int sum;
// CHECK-NEXT:   int n1 = 1;
// CHECK-NEXT:   int n2 = 1;
// CHECK-NEXT:   int tmp = 0;
// CHECK-NEXT:   int i;
// CHECK-NEXT:   if (a1 < 3) {
// CHECK-NEXT:     return 1;
// CHECK-NEXT:   } else {
// CHECK-NEXT:     for (i = 0; i <= a1 - 3; ++i) {
// CHECK-NEXT:       tmp = n1 + n2;
// CHECK-NEXT:       n1 = n2;
// CHECK-NEXT:       n2 = tmp;
// CHECK-NEXT:     }
// CHECK-NEXT:   }
// CHECK-NEXT:   return tmp;
// CHECK-NEXT: }