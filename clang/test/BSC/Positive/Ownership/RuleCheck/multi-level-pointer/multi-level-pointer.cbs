// RUN: %clang_cc1 -verify %s
// expected-no-diagnostics
// RUN: %clang %s -o %t.output
// RUN: %t.output
// RUN: %clang -rewrite-bsc %s -o %t-rw.c
// RUN: %clang %t-rw.c -o %t-rw.output
// RUN: %t-rw.output

void cons(int * owned p) {
    int* a = (int *)p;
}

int * owned * func4(int * owned * p) {
    int * owned re1 = *p;
    cons(re1);
    return p;
}

int * owned * owned func6(int * owned * owned p) {
    int * owned re1;
    re1 = *p;
    *p = re1;
    return p;
}

void consumePtr(int * owned p) {
    int * p1 = (int *)p;
    return;
}

void f1(int owned * p) {
    return;
}

int * owned f2(int * owned p) {
    int * owned re1 = p;
    return re1;
}

int * owned * f3(int * owned * p) {
    int * owned re1 = *p;
    consumePtr(re1);
    return p;
}

int * owned * owned * f7(int * owned * owned * p) {
    int * owned re1;
    re1 = **p;
    cons(re1);
    return p;
}

int main() {
    return 0;
}